<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„ØµÙˆØªÙŠ Ù„Ù„Ù…Ø¹ØªÙ…Ø±ÙŠÙ† 24/7</title>
<style>
body { font-family: 'Segoe UI', sans-serif; background:#f8f9fa; margin:0; display:flex; flex-direction:column; align-items:center; }
h1 { text-align:center; margin-top:20px; }
#assistant { margin-top:20px; width:90%; max-width:600px; background:white; border-radius:10px; padding:20px; box-shadow:0 2px 10px rgba(0,0,0,0.2);}
#messages { height:300px; overflow-y:auto; border:1px solid #ddd; border-radius:5px; padding:10px; margin-bottom:10px; background:#fafafa;}
.message { margin:5px 0; padding:8px 12px; border-radius:8px; max-width:80%; }
.user { background:#4A90E2; color:white; margin-left:auto; text-align:right;}
.ai { background:#A8E6CF; color:#000; margin-right:auto; text-align:left;}
#controls { display:flex; gap:10px; }
#input { flex:1; padding:10px; font-size:16px; border-radius:5px; border:1px solid #ccc; }
button { padding:10px 15px; font-size:16px; border:none; border-radius:5px; cursor:pointer; background:#009688; color:white; }
button:hover { background:#00796B; }
</style>
</head>
<body>

<h1>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„ØµÙˆØªÙŠ Ù„Ù„Ù…Ø¹ØªÙ…Ø±ÙŠÙ† 24/7</h1>

<div id="assistant">
  <div id="messages"></div>
  <div id="controls">
    <input type="text" id="input" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ø£Ùˆ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ† Ù„Ù„ØªØ­Ø¯Ø«">
    <button id="send">Ø¥Ø±Ø³Ø§Ù„</button>
    <button id="voice">ğŸ¤</button>
  </div>
</div>

<script>
// Ø¹Ù†Ø§ØµØ± Ø§Ù„ØµÙØ­Ø©
const messages = document.getElementById('messages');
const input = document.getElementById('input');
const sendBtn = document.getElementById('send');
const voiceBtn = document.getElementById('voice');

// Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø©
function addMessage(text, sender){
  const div = document.createElement('div');
  div.className = 'message ' + sender;
  div.textContent = text;
  messages.appendChild(div);
  messages.scrollTop = messages.scrollHeight;
}

// ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ ÙƒÙ„Ø§Ù…
function speak(text, lang='ar-SA'){
  if('speechSynthesis' in window){
    const utter = new SpeechSynthesisUtterance(text);
    utter.lang = lang;
    speechSynthesis.speak(utter);
  }
}

// Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ (Ù†Ø³Ø®Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©)
// Ù„Ø§Ø­Ù‚Ù‹Ø§ ÙŠÙ…ÙƒÙ† Ø±Ø¨Ø·Ù‡ Ø¨Ù€ OpenAI API Ø£Ùˆ Ø£ÙŠ AI backend
async function getAIResponse(userText){
  // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ API Ø®Ø§Ø±Ø¬ÙŠ Ù„Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ
  // Ù…Ø«Ø§Ù„: OpenAI GPT API
  // Ù„Ù„Ù†Ø³Ø®Ø© Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©ØŒ Ù†Ø³ØªØ®Ø¯Ù… Ø±Ø¯ÙˆØ¯ Ø¬Ø§Ù‡Ø²Ø©

  userText = userText.toLowerCase();

  // Ø£Ù…Ø«Ù„Ø© Ø§Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø°ÙƒÙŠØ©
  if(userText.includes("Ø£ÙŠÙ† Ø£Ù‚Ø±Ø¨ Ø­Ù…Ø§Ù…") || userText.includes("nearest bathroom")){
    return "Ø£Ù‚Ø±Ø¨ Ø­Ù…Ø§Ù… ÙŠÙ‚Ø¹ Ø¨Ø§Ù„Ù‚Ø±Ø¨ Ù…Ù† Ø¨Ø§Ø¨ Ø§Ù„Ù…Ù„Ùƒ Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ²ØŒ Ø¹Ù„Ù‰ ÙŠÙ…ÙŠÙ†Ùƒ Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„.";
  }
  if(userText.includes("Ù…ØªÙ‰ Ù…ÙˆØ¹Ø¯ Ø§Ù„ØµÙ„Ø§Ø©") || userText.includes("prayer time")){
    return "ÙˆÙ‚Øª Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© Ù‡Ùˆ Ø§Ù„ÙØ¬Ø± Ø§Ù„Ø³Ø§Ø¹Ø© 5:10 ØµØ¨Ø§Ø­Ù‹Ø§.";
  }
  if(userText.includes("ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø´ÙˆØ§Ø·") || userText.includes("tawaf count")){
    return "Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª 3 Ø£Ø´ÙˆØ§Ø· Ù…Ù† Ø§Ù„Ø·ÙˆØ§ÙØŒ ØªØ¨Ù‚Ù‰ 4 Ø£Ø´ÙˆØ§Ø·.";
  }
  if(userText.includes("Ø£Ø°ÙƒØ§Ø±") || userText.includes("adhkar")){
    return "ÙŠÙ…ÙƒÙ†Ùƒ Ù‚Ø±Ø§Ø¡Ø© Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ø·ÙˆØ§Ù Ø¨Ø¹Ø¯ ÙƒÙ„ Ø´ÙˆØ·: Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ØŒ Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ØŒ Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±.";
  }

  return "Ø¹Ø°Ø±Ù‹Ø§ØŒ Ù„Ù… Ø£ÙÙ‡Ù… Ø³Ø¤Ø§Ù„Ùƒ. Ø­Ø§ÙˆÙ„ Ø¥Ø¹Ø§Ø¯Ø© ØµÙŠØ§ØºØ© Ø§Ù„Ø³Ø¤Ø§Ù„ Ø£Ùˆ Ø¬Ø±Ø¨ Ø³Ø¤Ø§Ù„ Ø¢Ø®Ø±.";
}

// Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
async function sendMessage(){
  const text = input.value.trim();
  if(!text) return;
  addMessage(text, 'user');
  input.value = '';

  const response = await getAIResponse(text);
  addMessage(response, 'ai');
  speak(response, text.match(/[a-zA-Z]/) ? 'en-US' : 'ar-SA');
}

// Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
sendBtn.addEventListener('click', sendMessage);
input.addEventListener('keydown', (e)=>{ if(e.key==='Enter') sendMessage(); });

// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØµÙˆØª
let recognition;
if('webkitSpeechRecognition' in window){
  recognition = new webkitSpeechRecognition();
  recognition.lang = 'ar-SA';
  recognition.continuous = false;
  recognition.interimResults = false;

  recognition.onresult = function(event){
    const speech = event.results[0][0].transcript;
    input.value = speech;
    sendMessage();
  };
}

voiceBtn.addEventListener('click', ()=>{
  if(recognition){
    recognition.start();
  } else {
    alert("Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ† ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… ÙÙŠ Ù…ØªØµÙØ­Ùƒ.");
  }
});

</script>

</body>
</html>
