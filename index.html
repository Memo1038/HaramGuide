<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>الحرم المكي - الملاحة</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<style>
  body { margin:0; font-family: 'Segoe UI', sans-serif; }
  #map { height: 100vh; width: 100%; }
  .leaflet-popup-content { font-size: 16px; }
  #searchBox {
    position: absolute;
    top: 10px; left: 50%; transform: translateX(-50%);
    z-index: 1000; width: 300px;
  }
  #searchInput {
    width: 100%; padding: 8px; font-size: 16px; border-radius: 5px; border: 1px solid #999;
  }
</style>
</head>
<body>

<div id="searchBox">
  <input type="text" id="searchInput" placeholder="ابحث عن بوابة أو حمام أو مطعم...">
</div>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
// إنشاء الخريطة
var map = L.map('map').setView([21.4225, 39.8262], 17);

// إضافة طبقة الخرائط الأساسية
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '© OpenStreetMap',
}).addTo(map);

// نقاط الحرم
var points = [
  {name:"الكعبة المشرفة", coords:[21.422487, 39.826206]},
  {name:"مقام إبراهيم", coords:[21.4226, 39.8263]},
  {name:"بئر زمزم", coords:[21.4226, 39.8261]},
  {name:"باب الملك عبدالعزيز", coords:[21.4199, 39.8256]},
  {name:"باب السلام", coords:[21.4229, 39.8247]},
  {name:"باب الفتح", coords:[21.4253, 39.8289]},
  {name:"باب العمرة", coords:[21.4242, 39.8294]},
  {name:"باب الصفا", coords:[21.4215, 39.8279]},
  {name:"باب الملك فهد", coords:[21.4220, 39.8237]},
  {name:"باب أجياد", coords:[21.4207, 39.8262]},
  {name:"الصفا", coords:[21.4217, 39.8277]},
  {name:"المروة", coords:[21.4249, 39.8292]},
  {name:"مجمع الحمامات الشمالية", coords:[21.4254, 39.8279]},
  {name:"مجمع الحمامات الجنوبية", coords:[21.4195, 39.8260]}
];

// إنشاء علامات
var markers = [];
points.forEach(function(p){
  var marker = L.marker(p.coords).addTo(map).bindPopup("<b>"+p.name+"</b>");
  markers.push({marker:marker, name:p.name});
});

// البحث في النقاط
var input = document.getElementById('searchInput');
input.addEventListener('input', function(){
  var val = input.value.toLowerCase();
  markers.forEach(function(m){
    if(m.name.toLowerCase().includes(val)){
      map.setView(m.marker.getLatLng(), 18);
      m.marker.openPopup();
    }
  });
});
</script>

</body>
</html>
